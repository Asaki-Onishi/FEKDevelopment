## 【4年大西-忘年会向け】卒業研究について
# 【全体】学内ネットワークログ監査システムの試作
- 分かりやすく言えば誰でも広く取得・改造といった利用が出来る **オープンソースソフトウェア(OSS)** を活用したログデータ監視システムを作るというものです。
  
- ログデータについて  
ログデータとは、コンピュータが動作する上で出力される記録のことです。エラーメッセージは勿論のこと、アクセス履歴、回数、時間、設定の読み込みといった**あらゆるデータがコンピュータ上で記録されています**。皆さんもC言語やJavaでコーディングしているときに沢山見たであろうエラーメッセージもログデータのひとつという訳です。  
何故そんなものをものを監視するのかといえば、システムに何かしらの不正や負荷が働いている場合、真っ先にそれが分かるのがログデータだからです。しかし、ログデータは何のサービス・アプリケーションが動作していなくとも、コンピュータがただ動作しているだけで毎秒大量に排出されています。全てを見ることは実質 **もぅﾏﾁﾞ無理。** そのため、監視の部分を自動で行いエラーが多発したら通知してくれるサービスを開発しようということなのです。
<div style="text-align: center">
<img src="https://github.com/Asaki-Onishi/FEKDevelopment/blob/master/etc/No1.PNG">
図1.混乱する人
</div>

---
## ざっくりとした大背景
1. 少子化による労働人口減少
2. 属人化防止のための自動化及び効率化の必要性
3. 教育機関において独自の強みを探したい風潮  

<details><summary><strong>
ひとつずつ説明します。(蛇足になりそうなんで飛ばしてもおｋ)
</strong></summary><div>

### １．少子化による労働人口の減少
知っての通り、少子化による労働人口の減少は著しく特にIT人材の不足がチョーやばい。内閣府平成30年度経済財政報告書によると、他の先進諸国と比較して供給人口が低く人材不足が深刻。ビッグデータやアナリティクスの活用割合も2割程度低い、重要視されづらいため関わる人材が更に減少中。
<img src="https://github.com/Asaki-Onishi/FEKDevelopment/blob/master/etc/no2.PNG">
<div style="text-align: center">
図2.総務省平成24年度　国勢調査
</div>
  
### ２．属人化防止のための自動化及び効率化の必要性
人手不足or更に人手が不足してくるのが分かるため、業務の効率化・生産性の向上を行うため自動化や可視化に取り組む企業は多い。  
ビッグデータはその膨大さから人間が直接処理することは難しく、複雑なシステムになるほど仕様や特性を把握している担当者でなければデータを適切に扱えない。いわゆる「その人にしかできない」**属人化**が起こりやすい。  
そのためシステム全体を分かりやすくする（ハードやソフトは同じメーカー・SIerで統一する等）ことや可視化による誰でも定量的な情報を得られるようにする処置が重要となる。
  
### ３．教育機関において独自の強みを見つけたい
大学を始めとする教育機関において、IR(Institutional Research)が注目される。
- 少子高齢化のため入学者減少を食い止めるべく、IRからそれぞれの大学が持つ独自の強みを発見し、経営・教育改善に役立てようとしている。  

当然、大学内のネットワークを学生がどのように利用しているのか動きや傾向も貴重な情報となる。しかし、膨大な情報の管理を可視化等を駆使し、最適に運用することが出来ている教育機関は少ない。

</div></details>
以上の大背景を前提として、本大学をテストケースとしたシステム開発を行い構築の簡易化と業務効率の改善について検証・調査する。

---

## 本大学の現状
- 本大学には他大学が備えているような分析システム或いは類似する仕組みが存在しない。(つまり人力☆分析)
- 本大学のネットワーク管理は、可視化されておらず対応は管理者に依存している。(属人化の懸念)
- データの蓄積が適切ではないため、長期的なインシデント傾向を把握するのは困難である。(加えて様々なメーカーの機器やソフトが混在しており統一されていない)

## 他の研究に対しての位置付け
北海道大学、大分大学といった研究機関が導入・研究している分野は、蓄積、分析、可視化といった要素がばらばらに行われており、蓄積から可視化まで利用した事例は少ない。  
前述した通り本研究は、データの収集・蓄積から可視化までを行うシステムを試作する。  
本研究においては、同深町研究室の茂木紫苑との共同研究を行い、筆者(大西)はシステム基盤の構築を担当する。

---

# 【個別】ログデータ分析基盤の構築
分析・監視システムの土台となる基盤の構築は、オープンソースソフトウェア(以下、OSS)を利用する。システム全体の概念図は下記の通り。

<div style="text-align: center">
<img src="https://github.com/Asaki-Onishi/FEKDevelopment/blob/master/etc/no3.PNG">
図3.システムの概念図
</div>

システム全体の流れとしては、ネットワークからログデータを収集し、蓄積したデータを分析・監視システムを通して可視化を行うものである。使用するOSSは次の通り。

- ## Elasticsearch
ログデータを蓄積を担当するソフトウェア。  
elastic社が開発・提供している全文検索ソフトウェアで、Java環境で動作している。関係データベース(RDB)とはデータの蓄積と管理では共通点があるが、Elasticsearchは検索処理をメインで行うアーキテクチャであるため検索条件に対して柔軟に対応出来る。

- ## Fluentd
ログデータを収集するミドルウェア。
プラグインが非常に豊富で、収集したデータを一定の形式に成型したりストリーミング処理による軽快な動作が可能。データ成型機能により不特定多数の機器から、送信される異なる形式データであっても対応出来る拡張性の高さを誇る。

- ## Kibana
可視化を行うソフトウェア。
Elasticsearchと同じくelastic社より開発・提供されるソフトウェアで、elasticsearchとの親和性が高い。組み合わせる場合、elasticsearch内にkibanaの設定を保持するため障害発生時にある程度の可用性がある。

# 展望(引継ぎ？)
サーバ運用の基本OSはCentOSであることが多い理由から、現在の開発環境(Debian)に依らないクロスプラットフォーム展開が望まれている。
- セキュリティ機能強化(地図上に投影など)
- アプリケーション機能追加
- クラスター構成による冗長化