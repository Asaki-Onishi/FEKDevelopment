# 1-1 chmodってなんなのさ
答：ファイル及びディレクトリの**操作権限を変更する**コマンドです。  
rootならば全てのファイルを操作することは思いのままであるが、通常のユーザではシステムを操作する際にいちいちsudoコマンドを挟まないといけないことや、そもそもrootじゃないと不便なことが多い。しかし、保安上の見地から管理者以外のユーザがroot権限を持つことは好ましくない。rootとまではいかなくとも、rootに近い操作権限を与えたり、逆に読み取り以外の一切の操作を許さないように権限を奪うことも出来る。シェルスクリプトのなかで他の実行ファイルやコマンドを利用する際に引っかかったりして、頭おかしくならないためにしっかり覚えましょう。  

## 1-2 コマンドについてのイロハ
> chmod アクセス権限 ファイル名

上記の様子を見ると簡単そうに見えるが奥が深いコマンドである。  
- アクセス権限  
これは数字を割り振ってその合算値で権限を付与するというものである。  
0 = 権限不可  
1 = 実行可能  
2 = 書き込み可能  
4 = 読み込みのみ可能  
上記の数字で権限を決定する。  
ex)  
1 + 2 = 3 で実行及び書き込みが可能  
1 + 4 = 5 で実行及び読み込みのみ可能  
1 + 2 + 4 = 7 で読み込みから実行まで全てを許可  
といった具合にである。  

> 権限の状態を確認  
$ ls -l  
-rw-r--r-- 1 user user 0 12月 23 test.sh  
#例 プログラムtest.shを全ユーザに対して権限を付与する。  
$ chmod 777 test.sh  
再度権限の確認  
$ ls -l  
-rwxrwxrwx 1 user user 0 12月 23 test.sh

## 2-1 ユーザーってなんですか？
１と２と４の数字の組み合わせで権限を付与するのは分かったけど、なんだか良くわからない英数字が並んで訳が分からないだろう。少なくとも**俺には分からなかった。** そこでもう少し掘り下げて調査してみた。  
  
lsコマンドでファイルの一覧が出てくるのは既に理解していると思うが(してるよね？)、-lオプションを付与することでタイムスタンプやファイル容量といった情報を知ることも出来る。  
> $ ls -l  
-rwxrwxrwx 1 user user 0 12月 23 test.sh

右側から順番に調査してゆこう。  
  
出てきたものを右から順番に見ると  
・ファイルタイプ及びパーミッション  
・ハードリンクの数(今回は割愛)  
・所有者  
・グループ  
・ファイルサイズ（Byte）  
・タイムスタンプ  
・ファイル名  
となる。

まず、r,w,xであるが察しの良い人は既に理解できているるかもしれないが、rは「read(読み込み)」、wは「write(書き込み)」,xは「x = exec(実行)」の意味が割り振られている。rwxは一通りの実行権限を許可していると見ることが出来る。また、それらが三つ並んでいることは三つのユーザ格に、それぞれrwxで権限を付与しているのだろう。ちなみに権限が許可されていない場合は「-」が割り振られている。しかし、注意しておきたいのが上記の一番左端の「-」は権限には関係がなく、ファイルかディレクトリかの識別部分である。test.shが実行ファイルではなくtestディレクトリであった場合は、  
> $ ls -l  
drwxrwxrwx 1 user user 0 12月 23 test

と表示されていただろう。  
他にも「|」シンボリックリンク、「c」キャラクタ型デバイスファイル、「b」ブロック型デバイスファイルと区別することが出来る。他にもSUIDやSGIDビットといった特殊なものも多数あるが、それぞれの用語の詳しい概要は別の機会に説明したい。  
ディレクトリである場合、実行パーミッション（権限）はxを指定することは含まれるファイルの実行権限が与えられるのではなく、ディレクトリへのアクセス権限が付与される。

### 2-2 ユーザーの格って何ですか
rwxrwxrwxと三つ並んでることから三種類のユーザがあると判断できるとの前述したが、具体的にどのようなユーザがいるのだろうか。左側のrwxに相当する部分から調べてみた。ユーザに関しての更に細かい理解は別項に譲ることにする。  
  
最も左側の「rwx」は**所有者**ユーザである。  
簡単に説明すると該当ファイルやディレクトリを作成したユーザのことを示す。「user」ユーザがtestファイルを作成すれば、「user」ユーザに対するアクセス権限は一番左の三文字で表されるといった具合だ。  
  
次の三文字（つまり真ん中）は**グループ**である。  
三種類のユーザと前述したが、厳密には異なる。あくまで理解の一助として三種類あるものだと覚えてほしい。
    
最後の最も右側の「rwx」は**その他のユーザ**を示す。  
その他のユーザとはその通りの意味で、所有者ユーザでもなく、かつ許可されたグループにも属していないユーザをことを指す。  

### 2-3 二つ連なる文字の意味
その次に気になる文字列は
user user といった部分である。人によってこの部分は大きく異なるだろうが、今回は説明する上で理解しやすくするため**userというログインユーザを持っている**という定義で説明したい。  

向かって左側のuserはファイルを作成したユーザを指すuserである。その右隣のuserはユーザが所属ずるグループ名である。今回の場合は初期設定のままであるため、**user**というグループに*user*というユーザが所属している状態であるわけだ。  

---
参考文献  
1. [37.2.ファイルの所有者と権限](http://www.turbolinux.com/products/server/11s/user_guide/x14237.html)  
2. [Linuxのユーザーとグループって何だろう？(1/2)](https://www.atmarkit.co.jp/ait/articles/1706/02/news014.html)  
## 発展要素（あとで読む！）
[chown - ファイルの所有者やグループを変更](https://webkaru.net/linux/chown-command/)  
